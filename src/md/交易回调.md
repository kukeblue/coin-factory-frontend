**7.1 场景说明**

网关收到交易处理结果，调用商户提供的回调接口，通知商户具体变化信息。该接口网关发送给您指定的回调地址的内容，处理您的业务信息。分转入和转出回调， 回调的次数和方式的将根据商户的设置决定

**7.1.0 转入回调**

一. POST/FORM

```plain
address=f1trzl2fkdk7uu3jkmi63pw5zog25d3ktwsnhgbna&appkey=cbadf3d59e287036d5b71eba9af153f4&balance=0.9900000000000000&fromaddr=f1wqr44i6tav4qkp32y3xaz2irs6py7eyuwjitp6i&ordid=9571222555&status=1&symbol=FIL&timestamp=1633441132&txid=bafy2bzacebi6prnvanvosowzf67csila37i43gdf3a6xhfce6ry7b3fedmwgu&type=recharge&key=XO8y4DQmPAx4BUoiBhi7KQ9CtApEFB61ymJQ4uspVJWQBJ766h53EFZUSyFsJbupfQwJYSvAtkeHuTbt
```

二. POST/JSON

```plain
{"address":"f1trzl2fkdk7uu3jkmi63pw5zog25d3ktwsnhgbna","appkey":"cbadf3d59e287036d5b71eba9af153f4","balance":"0.9900000000000000","fromaddr":"f1wqr44i6tav4qkp32y3xaz2irs6py7eyuwjitp6i","ordid":"9571222555","status":"1","symbol":"FIL","timestamp":"1634023357","txid":"bafy2bzacebi6prnvanvosowzf67csila37i43gdf3a6xhfce6ry7b3fedmwgu","type":"recharge"}
```

三. POST/XML

```plain
<response><appkey>cbadf3d59e287036d5b71eba9af153f4</appkey><balance>0.9900000000000000</balance><ordid>9571222555</ordid><symbol>FIL</symbol><address>f1trzl2fkdk7uu3jkmi63pw5zog25d3ktwsnhgbna</address><txid>bafy2bzacebi6prnvanvosowzf67csila37i43gdf3a6xhfce6ry7b3fedmwgu</txid><type>recharge</type><timestamp>1634023758</timestamp><status>1</status><fromaddr>f1wqr44i6tav4qkp32y3xaz2irs6py7eyuwjitp6i</fromaddr></response>
```

**7.1.0 入账回调参数说明**

| 参数      | 类型   | 说明                              |
| :-------- | :----- | :-------------------------------- |
| appkey    | string | 应用的 appkey                     |
| balance   | string | 数量                              |
| ordid     | string | 流水号                            |
| symbol    | string | 币种                              |
| address   | string | 收款地址                          |
| fromaddr  | string | 转出地址                          |
| status    | string | 状态 ： 1 ： 成功 其它状态： 失败 |
| timestamp | string | 时间                              |
| txid      | string | 哈希                              |
| type      | string | 类型 ： recharge : 入帐           |

**7.1.2 转入回调流程说明**

商户收到回调后，为了安全起见，最好进行验签操作，验签方式跟签名方式相同，生成 sign 跟回调获取的头部 sign 参数进行对比，验签通过后，商户根据 address 跟 txid 参数对比商户本地充值记录进行排重，成功后进行入帐操作

**7.2.0 转帐回调**

一. POST/FORM

```plain
appkey=cbadf3d59e287036d5b71eba9af153f4&balance=0.1268300000000000&fromaddr=f3tbcweoohogc26eezrvskpa2yxpmcq7iovdijod5mabic45f5rmowkqgdue4ridpjetdcmtwkfi3635rhha4a&ordid=534565464&status=1&symbol=FIL&timestamp=1634028254&toaddr=f3tbcweoohogc26eezrvskpa2yxpmcq7iovdijod5mabic45f5rmowkqgdue4ridpjetdcmtwkfi3635rhha4a&txid=bafy2bzacecsrxdyiv4x7ymxdnmgbhuw4gymp253nn6zzvd5ep6nk6x2qglrpk&type=transfer&key=XO8y4DQmPAx4BUoiBhi7KQ9CtApEFB61ymJQ4uspVJWQBJ766h53EFZUSyFsJbupfQwJYSvAtkeHuTbt
```

二. POST/JSON

```plain
{"appkey":"cbadf3d59e287036d5b71eba9af153f4","balance":"0.1268300000000000","fromaddr":"f3tbcweoohogc26eezrvskpa2yxpmcq7iovdijod5mabic45f5rmowkqgdue4ridpjetdcmtwkfi3635rhha4a","ordid":"534565464","status":"1","symbol":"FIL","timestamp":"1634028544","toaddr":"f3tbcweoohogc26eezrvskpa2yxpmcq7iovdijod5mabic45f5rmowkqgdue4ridpjetdcmtwkfi3635rhha4a","txid":"bafy2bzacecsrxdyiv4x7ymxdnmgbhuw4gymp253nn6zzvd5ep6nk6x2qglrpk","type":"transfer"}
```

三. POST/XML

```plain
<response><appkey>cbadf3d59e287036d5b71eba9af153f4</appkey><balance>0.1268300000000000</balance><ordid></ordid><symbol>FIL</symbol><txid>bafy2bzacecsrxdyiv4x7ymxdnmgbhuw4gymp253nn6zzvd5ep6nk6x2qglrpk</txid><type>transfer</type><timestamp>1634028624</timestamp><status>1</status><fromaddr>f3tbcweoohogc26eezrvskpa2yxpmcq7iovdijod5mabic45f5rmowkqgdue4ridpjetdcmtwkfi3635rhha4a</fromaddr><toaddr>f3tbcweoohogc26eezrvskpa2yxpmcq7iovdijod5mabic45f5rmowkqgdue4ridpjetdcmtwkfi3635rhha4a</toaddr></response>
```

**7.2.1 回调参数说明**

| 参数     | 类型   | 说明                       |
| :------- | :----- | :------------------------- |
| appkey   | string | 应用的 appkey              |
| balance  | string | 数量                       |
| ordid    | string | 订单号： 必须唯一          |
| symbol   | string | 币种                       |
| txid     | string | 哈希                       |
| type     | string | 类型 ： transfer: 转出     |
| fromaddr | string | 转出地址                   |
| toaddr   | string | 转入地址                   |
| status   | string | 状态 ： 1 ： 成功 2： 失败 |

**7.1.2 转出回调流程说明**

商户收到回调后，为了安全起见，最好进行验签操作，验签方式跟签名方式相同，生成 sign 跟回调的 sign 参数进行对比，验签通过后，商户订单号 ordid 对比商户本地转帐记录，成功扣除相应的数量，失败回滚操作
