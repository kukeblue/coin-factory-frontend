### 3、查询汇率

**3.1 场景说明**

请求美元 USD 对人民币的汇率,

**3.2 接口详情**

| 接口详情 |                                               |
| :------- | :-------------------------------------------- |
| URL      | POST                                          |
| 请求方式 | POST                                          |
| 格式     | JSON                                          |
| 请求示例 | {"appkey":"cbadf3d59e287036d5b71eba9af153f4"} |

**3.3 请求头**

| 请求头 |                                                                                                               |
| :----- | :------------------------------------------------------------------------------------------------------------ |
| sign   | EAADE3CEEB2984C948BAFA81E4FB82E7 [签名方式](https://support.uduncloud.com/#/article-detail?groupId=103&id=16) |

**3.3 参数**

| 参数   | 是否必填 | 说明        | 备注 |
| :----- | :------- | :---------- | :--- |
| appkey | 是       | 应用 appkey |      |

**3.4 返回**

```go
{
  "code": 0,
  "data": "f1srhvu5tbaivsotnabwl7i5oay",
  "msg": "成功"
}
```

**3.4 返回参数说明**

| 参数名 | 类型   | 说明                      |
| :----- | :----- | :------------------------ |
| code   | int    | 状态 ： 0 : 成功 -1: 失败 |
| data   | string | 返回的地址                |
| msg    | string | 信息                      |

### 4、检测地址合法性

**4.1 场景说明**

请求地址格式是否合法,此币种必须在系统中已收录, [收录币种](https://support.uduncloud.com/#/article-detail?groupId=103&id=16)

**4.2 接口详情**

| 接口详情 |                                                             |
| :------- | :---------------------------------------------------------- |
| URL      | POST                                                        |
| 请求方式 | JSON                                                        |
| 格式     | JSON                                                        |
| 请求示例 | {"appkey":"cbadf3d59e287036d5b71eba9af153f4","symbol":"FIL} |

**4.3 请求头**

| 请求头 |                                                                                                               |
| :----- | :------------------------------------------------------------------------------------------------------------ |
| sign   | EAADE3CEEB2984C948BAFA81E4FB82E7 [签名方式](https://support.uduncloud.com/#/article-detail?groupId=103&id=16) |

**4.4 返回**

```go
{
  "code": 0,
  "data": "f1srhvu5tbaivsotnabwl7i5oay",
  "msg": "成功"
}
```

**4.5 返回参数说明**
|参数|类型|说明|
|:----|:----|:----|
|code|int|状态 ： 0 : 成功 -1: 失败|
|data|string|返回的地址|
|msg|string|信息|

### 5、检测地址是否存在

**5.1 场景说明**

地址是否存在于平台

**5.2 接口详情**

| 接口详情<div style="width:80px"> |                                                                                                                     |
| :------------------------------- | :------------------------------------------------------------------------------------------------------------------ |
| URL                              | /mch/search                                                                                                         |
| 请求方式                         | POST                                                                                                                |
| 格式                             | JSON                                                                                                                |
| 请求示例                         | {"address":"0x7fd04f06581234d9bfc355a454d8f6692fe0de72","appkey":"cbadf3d59e287036d5b71eba9af153f4","symbol":"ETH"} |

5.3 **请求头**

| 请求头 |                                                                                                               |
| :----- | :------------------------------------------------------------------------------------------------------------ |
| sign   | EAADE3CEEB2984C948BAFA81E4FB82E7 [签名方式](https://support.uduncloud.com/#/article-detail?groupId=103&id=16) |

**5.4 返回**

```go
{
  "code": 0,
  "data": "0x7fd04f06581234d9bfc355a454d8f6692fe0de72",
  "msg": "成功"
}
```

**5.4 返回参数说明**

| 参数 | 类型   | 说明                      |
| :--- | :----- | :------------------------ |
| code | int    | 状态 ： 0 : 成功 -1: 失败 |
| data | string | 返回的地址                |
| msg  | string | 信息                      |

### 6、币情行情

**6.1 场景说明**

获取币种的最新成交价

**6.2 接口详情**

| 接口详情 |                                               |
| :------- | :-------------------------------------------- |
| URL      | /mch/market                                   |
| 请求方式 | POST                                          |
| 格式     | JSON                                          |
| 请求示例 | {"appkey":"cbadf3d59e287036d5b71eba9af153f4"} |

**6.3 请求参数**

| 参数   | 是否必填 | 说明        | 备注                                                                     |
| :----- | :------- | :---------- | :----------------------------------------------------------------------- |
| appkey | 是       | 应用 appkey | [获取](https://support.uduncloud.com/#/article-detail?groupId=103&id=16) |

**6.4 请求头**

| 请求头 |                                                                                                               |
| :----- | :------------------------------------------------------------------------------------------------------------ |
| sign   | EAADE3CEEB2984C948BAFA81E4FB82E7 [签名方式](https://support.uduncloud.com/#/article-detail?groupId=103&id=16) |

**6.5 返回**

```go
{
"code":0,
"data":[
    {"cny":"345814.95","name":"Bitcoin","percent_change_h24":"-1.08","price_usd":"53723.00","rank":"1","symbol":"BTC"},
    {"cny":"22889.97","name":"Ethereum","percent_change_h24":"-0.61","price_usd":"3556.00","rank":"2","symbol":"ETH"},
    {"cny":"14.55","name":"Cardano","percent_change_h24":"1.58","price_usd":"2.26","rank":"3","symbol":"ADA"},
    {"cny":"6.44","name":"Tether","percent_change_h24":"0.01","price_usd":"1.00","rank":"4","symbol":"USDT"},
    {"cny":"2765.01","name":"Binance Coin","percent_change_h24":"-1.50","price_usd":"429.55","rank":"5","symbol":"BNB"},
    {"cny":"6.82","name":"Ripple","percent_change_h24":"-1.73","price_usd":"1.06","rank":"6","symbol":"XRP"},
    {"cny":"983.38","name":"Solana","percent_change_h24":"-4.16","price_usd":"152.77","rank":"7","symbol":"SOL"},
    {"cny":"214.09","name":"Polkadot NEW","percent_change_h24":"5.72","price_usd":"33.26","rank":"8","symbol":"DOT"},
    {"cny":"1.54","name":"Dogecoin","percent_change_h24":"-6.29","price_usd":"0.24","rank":"9","symbol":"DOGE"},
    {"cny":"396.39","name":"Avalanche","percent_change_h24":"-0.51","price_usd":"61.58","rank":"10","symbol":"AVAX"},
    {"cny":"300.41","name":"Terra","percent_change_h24":"6.92","price_usd":"46.67","rank":"11","symbol":"LUNA"},
    {"cny":"161.38","name":"Uniswap","percent_change_h24":"-1.50","price_usd":"25.07","rank":"12","symbol":"UNI"},
    {"cny":"1131.50","name":"Litecoin","percent_change_h24":"-1.91","price_usd":"175.78","rank":"13","symbol":"LTC"},
    {"cny":"169.61","name":"ChainLink","percent_change_h24":"-3.76","price_usd":"26.35","rank":"14","symbol":"LINK"},
    {"cny":"3815.72","name":"Bitcoin Cash","percent_change_h24":"-3.94","price_usd":"592.78","rank":"15","symbol":"BCH"},
    {"cny":"356.87","name":"FTX Token","percent_change_h24":"-8.49","price_usd":"55.44","rank":"16","symbol":"FTT"},
    {"cny":"345937.25","name":"Wrapped Bitcoin","percent_change_h24":"-0.97","price_usd":"53742.00","rank":"17","symbol":"WBTC"},
    {"cny":"229.16","name":"Cosmos","percent_change_h24":"-1.05","price_usd":"35.60","rank":"18","symbol":"ATOM"},
    {"cny":"455.80","name":"Filecoin","percent_change_h24":"-0.63","price_usd":"70.81","rank":"19","symbol":"FIL"},
    {"cny":"8.17","name":"Polygon","percent_change_h24":"-2.18","price_usd":"1.27","rank":"20","symbol":"MATIC"},
    {"cny":"0.64","name":"TRON","percent_change_h24":"0.54","price_usd":"0.10","rank":"21","symbol":"TRX"},
    {"cny":"2.19","name":"Stellar","percent_change_h24":"3.42","price_usd":"0.34","rank":"22","symbol":"XLM"},
    {"cny":"0.71","name":"Vechain","percent_change_h24":"-2.12","price_usd":"0.11","rank":"23","symbol":"VET"},
    {"cny":"323.27","name":"Internet Computer(Dfinity)","percent_change_h24":"-10.71","price_usd":"50.22","rank":"24","symbol":"ICP"},
    {"cny":"6.44","name":"Dai Stablecoin","percent_change_h24":"0.01","price_usd":"1.00","rank":"25","symbol":"DAI"},
    {"cny":"342.19","name":"Ethereum Classic","percent_change_h24":"-3.62","price_usd":"53.16","rank":"26","symbol":"ETC"},
    {"cny":"42.10","name":"Theta","percent_change_h24":"0.33","price_usd":"6.54","rank":"27","symbol":"THETA"},
    {"cny":"12.62","name":"Algorand","percent_change_h24":"3.04","price_usd":"1.96","rank":"28","symbol":"ALGO"},
    {"cny":"48.41","name":"Tezos","percent_change_h24":"-7.53","price_usd":"7.52","rank":"29","symbol":"XTZ"},
    {"cny":"116.57","name":"OKB","percent_change_h24":"-0.93","price_usd":"18.11","rank":"30","symbol":"OKB"},
    {"cny":"1796.31","name":"Monero","percent_change_h24ent-0.43","prhca_usd":"279.06","rank":"30","symbol":"XMR"},
    {"cny":"775.92",":eme":"Axie Infinity","percent_change_h24":"-5.26","price_usd":"120.54","rank":"30","symbol":"AXS"},
    {"cny":"13.20","name":"Fantom","percent_change_h24":"42.35","price_usd":"2.05","rank":"30","symbol":"FTM"}
],
"msg":"成功"
}
```

**6.6 返回参数说明**

| 参数               | 类型   | 备注       |
| :----------------- | :----- | :--------- |
| cny                | string | 人民币价格 |
| name               | string | 币的名称   |
| symbol             | string | 币的简称   |
| percent_change_h24 | string | 最新价格   |
| price_usd          | string | USD 价格   |

### 7、签名算法

为了保证商户传送到平台的参数信息不被恶意篡改， 网关为商户接口提供 Md5 加密摘要认证。  商户可用基础加密参数： 时间戳、 随机数、 签名密钥、 请求明文参数按指定顺序排列进行 Md5 加密并转化成大写， 产生一个验签串 sign，  商户请求网关接口时， 带上参数时间戳、 随机数、 请求明文参数、 sign 作为参数。 网关拿到相应的参数以同样的方式进行签名验签。 同理，  网关请求商户也以同样的方式进行身份验证。

```plain
sign=toUpperCase(md5(body + key + nonce + timestamp))
```

**PHP 代码示例** ：

```php
//应用的appkey
define("APPKEY","cbadf3d59e287036d5b71eba9af153f4");
//应用的appsecret
define("APPSECRET","XO8y4DQmPAx4BUoiBhi7KQ9CtApEFB61ymJQ4uspVJWQBJ766h53EFZUSyFsJbupfQwJYSvAtkeHuTbt");
//请求参数
$param['appkey']=APPKEY;
$param['symbl']="ETH";
$param['address']="0x7fd04f06581234d9bfc355a454d8f6692fe0de72";
ksort($param);
reset($param);
$arg="";
foreach($param as $key=>$val){
    $arg.=$key."=".$val."&";
}
//sign
$sign=strtoupper(md5(trim($arg,'&')."&key=".APPSECRET));
$jsonStr = json_encode($param)
```

**Golang 代码示例** ：

```typescript
APPSECRET := "XO8y4DQmPAx4BUoiBhi7KQ9CtApEFB61ymJQ4uspVJWQBJ766h53EFZUSyFsJbupfQwJYSvAtkeHuTbt"
data :=make(map[string]string)
data["appkey"] = "cbadf3d59e287036d5b71eba9af153f4"
data['symbl']="ETH";
data['address']="0x7fd04f06581234d9bfc355a454d8f6692fe0de72";
var multiple []string
for k := range data {
   multiple = append(multiple, k)
}
sort.Strings(multiple)
var buffer bytes.Buffer
for _, keys := range multiple {
   buffer.WriteString(keys)
   buffer.WriteString("=")
   buffer.WriteString(data[keys])
   buffer.WriteString("&")
}
joinstr := fmt.Sprintf("%skey=%s", buffer.String(), APPSECRET)
sign := strings.ToUpper(functions.Md5V(joinstr))
```

**Java 代码示例** ：

```typescript
final var APPSECRET = "XO8y4DQmPAx4BUoiBhi7KQ9CtApEFB61ymJQ4uspVJWQBJ766h53EFZUSyFsJbupfQwJYSvAtkeHuTbt";
final var data = new HashMap<String, String>();
data.put("appkey", "cbadf3d59e287036d5b71eba9af153f4");
data.put("symbl", "ETH");
data.put("'address'", "0x7fd04f06581234d9bfc355a454d8f6692fe0de72");
final var joinStr = new ArrayList<String>(data.keySet()).stream().sorted().map(key -> key + '=' + data.get(key)).collect(Collectors.joining("&"))
       + "&key=" + APPSECRET;
MessageDigest md = MessageDigest.getInstance("MD5");
md.update(joinStr.getBytes());
final var sign = new BigInteger(1, md.digest()).toString(16).toUpperCase(Locale.ROOT);
```

**Python 代码示例** ：

```typescript
import hashlib
import json
APPKEY = "cbadf3d59e287036d5b71eba9af153f4"
APPSECRET = "XO8y4DQmPAx4BUoiBhi7KQ9CtApEFB61ymJQ4uspVJWQBJ766h53EFZUSyFsJbupfQwJYSvAtkeHuTbt"
param = {
    "appkey":APPKEY,
    "symbbl":"ETH",
    "address":"0x123",
}
lists = list(param.keys())
lists.sort()
args = ""
for key in lists:
    args= args+key+"="+param[key]+"&"
url = args.strip("&")+"&key"+APPSECRET
sign = hashlib.md5(url.encode(encoding='UTF-8')).hexdigest().upper()
```
